(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,a){e.exports=a(47)},27:function(e,t,a){},28:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),i=a(17),r=a.n(i),c=(a(26),a(27),a(28),a(7)),s=a.n(c),o=a(18),m=a(2),u=a(3),p=a(5),d=a(4),h=a(6),E=a(19),v=a.n(E),f="Basel",N={BASEL:{DREIROSENBRUECKE:{name:"Dreirosenbr\xfccke",exclude:f,id:8588768},RIEHENRING:{name:"Riehenring",exclude:f,id:8589352},SBB:{name:"Basel SBB",exclude:f,id:8500010},BARFUESSERPLATZ:{name:"Barf\xfcsserplatz",exclude:f,id:8500897}}}.BASEL.RIEHENRING,b=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"row h-100"},l.a.createElement("div",{className:" col-2 text-center"},l.a.createElement("h1",null,l.a.createElement("u",null,"Linie"))),l.a.createElement("div",{className:" col-7 text-left"},l.a.createElement("h1",{className:""},l.a.createElement("u",null,"Fahrtziel"))),l.a.createElement("div",{className:" col-3 text-center"},l.a.createElement("h1",null,l.a.createElement("u",null,"Abfahrt"))))}}]),t}(n.Component),O=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"row h-100"},l.a.createElement("div",{className:"col-2 text-center"}),l.a.createElement("div",{className:"col-8 text-center"},l.a.createElement("h1",{style:{color:"#c7c3c3"},className:"pl-1"}," ",N.name," ",l.a.createElement("span",{className:"badge badge-danger"},"Live"))),l.a.createElement("div",{className:"col-2 text-center"},l.a.createElement("span",{className:"float-right"},"Last update: ",this.props.lastUpdate)))}}]),t}(n.Component),w=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).state={show:!0},a.interval=null,a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;"jetzt"===this.props.item.planned_arrival_time&&(this.interval=setInterval(function(){e.blink()},1e3))}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"blink",value:function(){this.setState({show:!this.state.show})}},{key:"render",value:function(){return l.a.createElement("div",{className:"row h-100 ".concat(this.state.show?"":"invisible")},l.a.createElement("div",{className:"col-2 text-center"},l.a.createElement("h1",null,this.props.item.line)),l.a.createElement("div",{className:"col-7 text-left"},l.a.createElement("h1",null,this.props.item.destination.includes(N.exclude)?this.props.item.destination.split(",")[1]:this.props.item.destination)),l.a.createElement("div",{className:"col-3 row"},l.a.createElement("div",{className:"".concat("jetzt"===this.props.item.planned_arrival_time||"Entf\xe4llt"===this.props.item.planned_arrival_time?"col-12 text-center":"col-6 text-right")},l.a.createElement("h1",null,this.props.item.planned_arrival_time)),"jetzt"!==this.props.item.planned_arrival_time&&"Entf\xe4llt"!==this.props.item.planned_arrival_time?l.a.createElement("div",{className:"col-6 text-left"},l.a.createElement("h1",null,"min")):null))}}]),t}(n.Component);function _(e,t,a){var n=Date.parse(e.replace(" ","T").concat("Z"));if("X"===t)return"Entf\xe4llt";t&&"0"!==t.split("+")[1]&&(n+=t.split("+")[1]*t.ONE_MINUTE);var l=new Date(n-a.getTime());return l.getTime()<-j.FIFTEEN_SECONDS?null:l.getTime()<j.FIFTEEN_SECONDS?"jetzt":l.getTime()<j.ONE_MINUTE?"<1":l.getMinutes()}var j={TEN_SECONDS:1e4,FIFTEEN_SECONDS:15e3,ONE_MINUTE:6e4},y=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).state={timeTableItems:[],lastUpdate:null},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setup(),setInterval(Object(o.a)(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.setup();case 1:case"end":return t.stop()}},t)})),j.TEN_SECONDS)}},{key:"setup",value:function(){var e=this;v.a.get("//timetable.search.ch/api/stationboard.json?stop="+N.id+"&show_delays=1").then(function(e){return e}).then(function(t){var a=t.data.connections.slice(0,20),n=[],l=new Date;a.forEach(function(e){var t=function(e,t){return{vehicleType:e.type,planned_arrival_time:_(e.time,e.dep_delay,t),time:e.time,destination:e.terminal.name,line:e.line,delay:e.dep_delay}}(e,l);t.planned_arrival_time&&n.push(t)}),n.length&&e.setState({timeTableItems:n,lastUpdate:(new Date).getHours()+":"+(new Date).getMinutes()+":"+(new Date).getUTCSeconds()})})}},{key:"render",value:function(){return this.state.timeTableItems.length?l.a.createElement("div",{className:"h-100"},l.a.createElement(O,{lastUpdate:this.state.lastUpdate}),l.a.createElement(b,null),l.a.createElement("div",{className:"container-fluid"},this.state.timeTableItems.splice(0,10).map(function(e){return l.a.createElement(w,{key:e.vehicleType+"-"+e.line+Math.random(),item:e})}))):null}}]),t}(n.Component);var g=function(){return l.a.createElement("div",{className:"App"},l.a.createElement(y,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[20,1,2]]]);
//# sourceMappingURL=main.eb0099ab.chunk.js.map