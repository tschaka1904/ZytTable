{"version":3,"sources":["Data/tram_info.js","Timetable/TimeTableHeader.js","Timetable/TimeTableTitle.js","Timetable/TimeTableColumn.js","Utils/TimeTableUtils.js","Timetable/TimeTable.js","App.js","serviceWorker.js","index.js"],"names":["TOWN_NAMES","WHERE_AM_I","BASEL","DREIROSENBRUECKE","name","exclude","id","RIEHENRING","SBB","BARFUESSERPLATZ","TimeTableHeader","react_default","a","createElement","className","Component","TimeTableTitle","style","color","this","props","lastUpdate","TimeTableColumn","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","show","interval","_this2","item","planned_arrival_time","setInterval","blink","clearInterval","setState","concat","line","destination","includes","split","calculateDepartureTime","plannedDepartureDateString","currentDelayString","currentDate","estimatedDeparture","Date","parse","replace","ONE_MINUTE","check","getTime","MILLISECONDS","FIFTEEN_SECONDS","getMinutes","TEN_SECONDS","TimeTable","timeTableItems","setup","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","stop","_this3","axios","get","BASE_URL","then","response","reducedItemList","data","connections","slice","freshTimeTableItelms","forEach","rawItem","timeTableColumnObj","rawItemObject","vehicleType","type","time","dep_delay","terminal","delay","timeTableColumnObjectFactory","push","length","getHours","getUTCSeconds","Timetable_TimeTableTitle","Timetable_TimeTableHeader","splice","map","Timetable_TimeTableColumn","key","Math","random","App","TimeTable_TimeTable","Boolean","window","location","hostname","match","ReactDOM","render","src_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.eb0099ab.chunk.js","sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = '//timetable.search.ch/api/';\n\nconst TOWN_NAMES = {\n    BASEL: 'Basel'\n};\n\nconst STATIONS = {\n    BASEL: {\n        DREIROSENBRUECKE: {\n            name: 'Dreirosenbrücke',\n            exclude: TOWN_NAMES.BASEL,\n            id: 8588768\n        },\n        RIEHENRING: {\n            name: 'Riehenring',\n            exclude: TOWN_NAMES.BASEL,\n            id: 8589352\n        },\n        SBB: {\n            name: 'Basel SBB',\n            exclude: TOWN_NAMES.BASEL,\n            id: 8500010\n        },\n        BARFUESSERPLATZ: {\n            name: 'Barfüsserplatz',\n            exclude: TOWN_NAMES.BASEL,\n            id: 8500897\n        }\n    }\n};\n\n\n\nexport const WHERE_AM_I = STATIONS.BASEL.RIEHENRING;\n\nexport const getData = () => axios.get(BASE_URL + 'stationboard.json?stop=' + WHERE_AM_I.id + '&show_delays=1')\n    .then(response => response);","import React, {Component} from 'react';\n\nclass TimeTableHeader extends Component {\n    render() {\n        return (\n            <div className=\"row h-100\">\n                <div className=\" col-2 text-center\">\n                    <h1><u>Linie</u></h1>\n                </div>\n                <div className=\" col-7 text-left\">\n                    <h1 className=\"\"><u>Fahrtziel</u></h1>\n                </div>\n                <div className=\" col-3 text-center\">\n                    <h1><u>Abfahrt</u></h1>\n                </div>\n            </div>\n        );\n    }\n}\n\nTimeTableHeader.propTypes = {};\n\nexport default TimeTableHeader;","import React, {Component} from 'react';\nimport {WHERE_AM_I} from \"../Data/tram_info\";\n\nclass TimeTableTitle extends Component {\n    render() {\n        return (\n            <div className='row h-100'>\n                <div className=\"col-2 text-center\">\n                </div>\n                <div className=\"col-8 text-center\">\n                    <h1 style={{color: '#c7c3c3'}} className=\"pl-1\"> {WHERE_AM_I.name} <span\n                        className=\"badge badge-danger\">Live</span></h1>\n                </div>\n                <div className=\"col-2 text-center\">\n                    <span className=\"float-right\">Last update: {this.props.lastUpdate}</span>\n                </div>\n            </div>\n        );\n    }\n}\n\n\nexport default TimeTableTitle;","import React, {Component} from 'react';\nimport {WHERE_AM_I} from \"../Data/tram_info\";\n\nclass TimeTableColumn extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            show: true,\n        };\n        this.interval = null;\n    }\n\n    componentDidMount() {\n        if (this.props.item.planned_arrival_time === 'jetzt') {\n            this.interval = setInterval(() => {\n                this.blink()\n            }, 1000);\n        }\n    }\n\n    componentWillUnmount() {\n        clearInterval(this.interval)\n    }\n\n    blink() {\n        this.setState({\n            show: !this.state.show\n        })\n    }\n\n    render() {\n        return (\n            <div className={`row h-100 ${this.state.show ? '' : 'invisible'}`}>\n                <div className=\"col-2 text-center\">\n                    <h1>{this.props.item.line}</h1>\n                </div>\n                <div className=\"col-7 text-left\">\n                    <h1>{this.props.item.destination.includes(WHERE_AM_I.exclude) ?\n                        this.props.item.destination.split(',')[1] : this.props.item.destination}</h1>\n                </div>\n                <div className=\"col-3 row\">\n                    <div\n                        className={`${this.props.item.planned_arrival_time === 'jetzt' || this.props.item.planned_arrival_time === 'Entfällt' ?\n                            'col-12 text-center' : 'col-6 text-right'}`}>\n                        <h1>{this.props.item.planned_arrival_time}</h1>\n                    </div>\n                    {this.props.item.planned_arrival_time !== 'jetzt' && this.props.item.planned_arrival_time !== 'Entfällt' ?\n                        <div className={'col-6 text-left'}>\n                            <h1>min</h1>\n                        </div> : null}\n                </div>\n            </div>\n        );\n    }\n}\n\nTimeTableColumn.propTypes = {};\n\nexport default TimeTableColumn;","export function calculateDepartureTime (plannedDepartureDateString, currentDelayString, currentDate) {\n    let estimatedDeparture = Date.parse(plannedDepartureDateString.replace(' ', 'T').concat('Z'));\n\n    let delayInMinutes = 0;\n\n    if (currentDelayString === 'X') {\n        return 'Entfällt'\n    }\n\n    if (currentDelayString && currentDelayString.split('+')[1] !== '0') {\n        delayInMinutes = currentDelayString.split('+')[1];\n        estimatedDeparture = estimatedDeparture + (delayInMinutes * currentDelayString.ONE_MINUTE)\n\n    }\n\n    const check = new Date(estimatedDeparture - currentDate.getTime());\n\n    if (check.getTime() < -MILLISECONDS.FIFTEEN_SECONDS) {\n        return null;\n    }\n\n    if (check.getTime() < MILLISECONDS.FIFTEEN_SECONDS) {\n        return 'jetzt';\n    }\n\n    if (check.getTime() < MILLISECONDS.ONE_MINUTE) {\n        return '<1';\n    }\n\n    return check.getMinutes();\n}\n\nexport function timeTableColumnObjectFactory(rawItemObject, currentDate) {\n    return {\n        vehicleType: rawItemObject.type,\n        planned_arrival_time: calculateDepartureTime(rawItemObject.time, rawItemObject.dep_delay, currentDate),\n        time: rawItemObject.time,\n        destination: rawItemObject.terminal.name,\n        line: rawItemObject.line,\n        delay: rawItemObject.dep_delay,\n    };\n}\n\nexport const MILLISECONDS = {\n    TEN_SECONDS: 10000,\n    FIFTEEN_SECONDS: 15000,\n    ONE_MINUTE: 60000,\n};\n","import React, {Component} from \"react\";\nimport {getData} from \"../Data/tram_info\";\nimport TimeTableHeader from \"./TimeTableHeader\";\nimport TimeTableTitle from \"./TimeTableTitle\";\nimport TimeTableColumn from \"./TimeTableColumn\";\nimport {MILLISECONDS, timeTableColumnObjectFactory} from \"../Utils/TimeTableUtils\";\n\n\nexport default class TimeTable extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            timeTableItems: [],\n            lastUpdate: null\n        };\n    }\n\n    componentDidMount() {\n        this.setup();\n        setInterval(async () => {\n            this.setup();\n        }, MILLISECONDS.TEN_SECONDS);\n    }\n\n    setup() {\n        getData().then(response => {\n            const reducedItemList = response.data.connections.slice(0, 20);\n            const freshTimeTableItelms = [];\n            const currentDate = new Date();\n            reducedItemList.forEach((rawItem) => {\n                const timeTableColumnObj = timeTableColumnObjectFactory(rawItem, currentDate);\n                if (timeTableColumnObj.planned_arrival_time) {\n                    freshTimeTableItelms.push(timeTableColumnObj)\n                }\n            });\n            if (freshTimeTableItelms.length) {\n                this.setState({\n                    timeTableItems: freshTimeTableItelms,\n                    lastUpdate: new Date().getHours() + ':' + new Date().getMinutes() + ':' + new Date().getUTCSeconds()\n                });\n            }\n        });\n    }\n\n\n    render() {\n        if (!this.state.timeTableItems.length) {\n            return null;\n        }\n        return (\n            <div className=\"h-100\">\n                <TimeTableTitle lastUpdate={this.state.lastUpdate}/>\n                <TimeTableHeader/>\n                <div className=\"container-fluid\">\n                    {this.state.timeTableItems.splice(0, 10).map((item) =>\n                        <TimeTableColumn key={item.vehicleType + '-' + item.line + Math.random()} item={item}/>\n                    )}\n                </div>\n            </div>\n        );\n    }\n}","import React from 'react';\nimport './App.css';\nimport TimeTable from \"./Timetable/TimeTable\";\n\nfunction App() {\n    return (\n        <div className=\"App\">\n            <TimeTable/>\n        </div>\n    );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}