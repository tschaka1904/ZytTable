(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,a){e.exports=a.p+"static/media/zyttable_logo.426f55b4.png"},26:function(e,t,a){e.exports=a(69)},33:function(e,t,a){},34:function(e,t,a){},66:function(e,t){},69:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),l=a(23),s=a.n(l),r=(a(32),a(33),a(34),a(2)),c=a(3),o=a(5),u=a(4),m=a(6),d=a(24),h=a.n(d),p="Basel",v={BASEL:{DREIROSENBRUECKE:{name:"Dreirosenbr\xfccke",exclude:p,id:8588768},RIEHENRING:{name:"Riehenring",exclude:p,id:8589352},SBB:{name:"Basel SBB",exclude:p,id:8500010},BARFUESSERPLATZ:{name:"Barf\xfcsserplatz",exclude:p,id:8500897}}}.BASEL.SBB,E=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"row",style:{height:"calc(100vh / 7)"}},i.a.createElement("div",{className:"col-2 text-center"},i.a.createElement("h2",{className:"text-responsive"},i.a.createElement("u",null,"Linie"))),i.a.createElement("div",{className:"col-7 text-left"},i.a.createElement("h2",{className:"text-responsive"},i.a.createElement("u",null,"Fahrtziel"))),i.a.createElement("div",{className:"col-3 text-center"},i.a.createElement("h2",{className:"text-responsive"},i.a.createElement("u",null,"Abfahrt"))))}}]),t}(n.Component);E.defaultPropTypes={};var f=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"row",style:{height:"calc(100vh / 6)"}},i.a.createElement("div",{className:"col-12 col-xl-7 text-center text-xl-right"},i.a.createElement("span",{style:{color:"#c7c3c3"},className:"text-responsive"},v.name)),i.a.createElement("div",{className:"col-12 col-xl-5 text-center"},i.a.createElement("small",{className:""},"Last update: ",this.props.lastUpdate)))}}]),t}(n.Component);f.defaultPropTypes={lastUpdate:""};var b=a(7),N=a.n(b),y={CANCELED:"X",ARRIVED:"jetzt",ARRIVES_SHORTLY:"< 1'"};function O(e,t,a){var n=N()(e),i=0;if("X"===t)return y.CANCELED;t&&"0"!==t.split("+")[1]&&(i=t.split("+")[1],n=n.add(N.a.duration(i,"m")));var l=N.a.duration(n.diff(a));return l.asMilliseconds()<-x.FIFTEEN_SECONDS?null:l.asMilliseconds()<x.FIFTEEN_SECONDS?y.ARRIVED:l.asMilliseconds()<x.ONE_MINUTE?y.ARRIVES_SHORTLY:Math.round(l.asMinutes())+"'"}var x={TEN_SECONDS:1e4,FIFTEEN_SECONDS:15e3,ONE_MINUTE:6e4},j=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={show:!0},a.interval=null,a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.item.planned_arrival_time===y.ARRIVED&&(this.interval=setInterval(function(){e.blink()},1e3))}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"blink",value:function(){this.setState({show:!this.state.show})}},{key:"render",value:function(){return i.a.createElement("div",{className:"row text-height ".concat(this.state.show?"":"invisible"),style:{height:"calc(100vh / 6)"}},i.a.createElement("div",{className:"col-4 col-xl-2 text-left"},i.a.createElement("span",{className:"text-responsive"},this.props.item.line)),i.a.createElement("div",{className:"order-xl-2 col-8 col-xl-4 text-right"},i.a.createElement("span",{className:"text-responsive"},this.props.item.planned_arrival_time)),i.a.createElement("div",{className:"order-xl-1 col-12 col-xl-6 text-left"},i.a.createElement("span",{className:"text-responsive"},this.props.item.destination.includes(v.exclude)?this.props.item.destination.split(",")[1]:this.props.item.destination)))}}]),t}(n.Component);j.defaultPropTypes={item:null};var w=j,S=a(25),T=a.n(S),g=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{style:{height:"100vh",width:"100vw",backgroundColor:"white"}},i.a.createElement("img",{src:T.a,alt:"ZytTable",style:{top:"50%",left:"50%",position:"fixed",transform:"translate(-50%, -50%)"}}))}}]),t}(n.Component),k=a(52),I=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={timeTableItems:[],lastUpdate:null,showLoader:!0},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setup(),this.loaderTimout(3e3),k.scheduleJob("*/10 * * * * *",function(){e.setup()}),document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState?e.setState({showLoader:!0}):e.loaderTimout(800)})}},{key:"loaderTimout",value:function(e){var t=this;setTimeout(function(){t.setState({showLoader:!1})},e)}},{key:"setup",value:function(){var e=this;h.a.get("//timetable.search.ch/api/stationboard.json?stop="+v.id+"&show_delays=1").then(function(e){return e}).then(function(t){var a=t.data.connections.slice(0,20),n=[],i=N()();a.forEach(function(e){var t=function(e,t){return{vehicleType:e.type,planned_arrival_time:O(e.time,e.dep_delay,t),time:e.time,destination:e.terminal.name,line:e.line,delay:e.dep_delay}}(e,i);t.planned_arrival_time&&n.push(t)}),n.length&&e.setState({timeTableItems:n,lastUpdate:N()().format("HH:mm:ss")})})}},{key:"render",value:function(){return!this.state.timeTableItems.length||this.state.showLoader?i.a.createElement(g,null):i.a.createElement("div",{className:"container"},i.a.createElement(f,{lastUpdate:this.state.lastUpdate}),this.state.timeTableItems.splice(0,5).map(function(e){return i.a.createElement(w,{key:e.vehicleType+"-"+e.line+Math.random(),item:e})}))}}]),t}(n.Component);var R=function(){return i.a.createElement("div",{className:"App"},i.a.createElement(I,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[26,1,2]]]);
//# sourceMappingURL=main.f9c55816.chunk.js.map